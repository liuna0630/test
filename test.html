<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="leaflet.css">
	<script type="text/javascript" src="leaflet.js"></script>
	<style type="text/css">
		.map{
			position: absolute;
			left: 0px;
			right: 0px;
			width: 100%;
			height: 100%;
		}
	</style>
</head>
<body>
<div id="map" class="map" name="map"></div>
<script type="text/javascript">
	var map = L.map('map').setView([39.9,116.4], 13);
	L.tileLayer('http://map.zhtu.net:8080/r3t-basemap/{z}/{x}/{y}/tile.jpg', { 
    	attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
	}).addTo(map);
	//添加缩放级别
   	L.control.scale({  
        	position: 'topright'  
        }).addTo(map);
   	//给map添加双击函数
   	var polyline = null;
   	map.on('dblclick', function(e) {
   		L.marker(e.latlng).addTo(map)
    	.bindPopup("lat:"+e.latlng.lat+" \rlng:"+e.latlng.lng)
    	.openPopup();
    	if(polyline==null)
    	{
    		polyline = L.polyline(e.latlng, {color: 'red'}).addTo(map);
    		polyline.addLatLng(e.latlng);
    	}
    	else
    	{
    		polyline.addLatLng(e.latlng);
    	}
	});
	

    /**
    * @author ln
    * @Date 2016-7-18 19:50
    * @see 双击函数的触发
    */
    

</script>
</body>
</html>